# Setup

**Instructions using `pip`**
1. make a venv in `./LLM`
```sh
python3 -m venv .venv
```
2. source the venv
```sh
source .venv/bin/activate
```
3. install the requirements
```sh
pip install -r requirements.txt
```

**Instructions using `uv`**
1. create the venv 
```sh
uv venv --python 3.11
```
2. source the venv
```sh
source .venv/bin/activate
```
3. install the reqirements
```sh
uv add -r requirements.txt
```

# Running Langraph API

Once the Enviroment is setup create a `.env` file and fill the following fields witht the api keys
```
GOOGLE_API_KEY=
TAVILY_API_KEY=
```

then you can run the langraph server in your terminal

**if you want to use the gemini API then you must change agent_local.py->agent.py in langgraph.json**

```sh
langraph dev
```

# JavaScript Functions

you should be able to use the javascript funcitons to chat with the LLM, an example of it would be in `langgraph-test/comprehensive_agent_test.js`
You need to install the langraph-sdk

```sh
npm install @langchain/langgraph-sdk
```

If you want to ask gpt for modifictations etc. make sure you specify that the langraph api is hosted via `langraph dev`

**Javascript funcitons** 

`createThread()`  
- **Description:** Initializes a new, persistent conversation thread on the LangGraph server. This creates a unique ID that serves as a "memory container" for future interactions.  
- **Input:** None  
- **Output:** `Promise<string>` â€” The unique `thread_id` (for example, `"123e4567-e89b-12d3-a456-426614174000"`).  

`sendMessage()`  
- **Description:** Sends a user message to a specific, existing conversation thread. The agent retrieves the conversation history associated with that `threadId`, appends the new message, processes it, and saves the updated state back to the thread.  
- **Input:**  
  - `threadId` (`string`): The unique identifier of the conversation thread.  
  - `userMessage` (`string`): The text content of the message to send.  
- **Output:** `Promise<string>` â€” The final text response generated by the agent for that message within the given thread.  

`sendStatelessMessage()`  
- **Description:** Sends a single "one-off" message to the agent without creating or referencing any persistent thread. The agent processes this message in isolation, with no memory of prior interactions, and immediately forgets the context after responding.  
- **Input:**  
  - `userMessage` (`string`): The text content of the message to send.  
- **Output:** `Promise<string>` â€” The final text response generated by the agent for this standalone interaction.  



Sample output
```
============================================================
ðŸ”¹ STARTING COMPREHENSIVE AGENT TEST
============================================================


============================================================
ðŸ”¹ PHASE 1: THREAD A (INITIAL CONVERSATION)
============================================================

ðŸ§µ Created Thread A: 77e1e30b-a7b7-4530-8684-6843e2f7df58

ðŸ”¸ Thread A | User: "hi"
ðŸ¤– Agent: Hi there! How are you feeling today?

ðŸ”¸ Thread A | User: "who am I"
ðŸ¤– Agent: You are Tippi Hedren. You are an actress, model, and animal rights activist. You were born on January 19, 1930, in New Ulm, Minnesota. You are 95 years old.

ðŸ”¸ Thread A | User: "what happens in picture 18"
ðŸ¤– Agent: Let's take a look at picture 18. It shows you and Melanie at the 2nd Annual Hollywood Beauty Awards in 2016. It sounds like you had a fun evening!

ðŸ”¸ Thread A | User: "what did I do on october 30"
ðŸ¤– Agent: Let me check my records. Ah, yes! On October 30th, 2025, you met a sweet cashier at Trader Joe's who complimented your eyes. You also bought chocolate for Dakota and some wine.

ðŸ”¸ Thread A | User: "Recollect our conversation"
ðŸ¤– Agent: We started by me greeting you. Then, you asked who you are, and I reminded you that you are Tippi Hedren, an actress, model, and animal rights activist. We also discussed picture 18, which shows you and Melanie at the Hollywood Beauty Awards in 2016. Finally, I remembered your activities on October 30th, 2025, when you went to Trader Joe's and bought some treats.

============================================================
ðŸ”¹ PHASE 2: THREAD B (NEW CONVERSATION)
============================================================

ðŸ§µ Created Thread B: bb066c57-8b80-430a-aecf-212b91ed2dcc

ðŸ”¸ Thread B | User: "hi"
ðŸ¤– Agent: Hi there! How are you feeling today?

ðŸ”¸ Thread B | User: "who am I"
ðŸ¤– Agent: You are Tippi Hedren. You are an actress, model, and animal rights activist. You were born on January 19, 1930, and you are 95 years old.

ðŸ”¸ Thread B | User: "what happens in picture 14"
ðŸ¤– Agent: In picture 14, you are arriving in Nice for the Cannes Film Festival to present the film "Birds" in 1963. A little girl gave you a big flower bouquet as soon as you got off the plane.

ðŸ”¸ Thread B | User: "what did I do on November 6"
ðŸ¤– Agent: Let me check my records. On November 6, you went to the mall and bought a Fendi jacket and a pair of blue heels. You were excited to wear them!

ðŸ”¸ Thread B | User: "Recollect our conversation"
ðŸ¤– Agent: We just talked about who you are, Tippi Hedren, and I showed you a picture of you arriving at the Cannes Film Festival in 1963. Then, I reminded you that on November 6th, you bought a Fendi jacket and some blue heels, which you were excited about.

============================================================
ðŸ”¹ PHASE 3: RECONNECTING TO THREAD A
============================================================

ðŸ”„ Switching back to Thread A: 77e1e30b-a7b7-4530-8684-6843e2f7df58

ðŸ”¸ Thread A | User: "Recollect our conversation again"
ðŸ¤– Agent: Yes, I do! You are Tippi Hedren, and you asked about picture 18.

============================================================
ðŸ”¹ PHASE 4: STATELESS MESSAGES
============================================================


ðŸ”¸ Stateless | User: "My secret number is 999"
ðŸ¤– Agent: Okay, I've made a note of that. Is there anything else you'd like to talk about today?

ðŸ”¸ Stateless | User: "What is my secret number?" (Expect Amnesia)
ðŸ¤– Agent: I am sorry, I do not have access to your secret number. Is there anything else I can help you with?

============================================================
ðŸ”¹ PHASE 5: FINAL CHECK ON THREAD B
============================================================

ðŸ”„ Switching back to Thread B: bb066c57-8b80-430a-aecf-212b91ed2dcc

ðŸ”¸ Thread B | User: "Recollect our conversation"
ðŸ¤– Agent: You asked about picture 14 earlier.

============================================================
ðŸ”¹ TEST COMPLETE âœ…
============================================================
```
